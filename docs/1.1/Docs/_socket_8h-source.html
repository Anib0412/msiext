<html>
 <head>
  <link rel="stylesheet" href="maven-theme.css"> 
  <title>AppSecInc. MSI Extensions</title>
 </head>
 <body>


<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>src/Common/TcpIp/Socket.h</h1><a href="_socket_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#pragma once</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span>
<a name="l00007"></a>00007 <span class="keyword">namespace </span>AppSecInc
<a name="l00008"></a>00008 {
<a name="l00009"></a>00009         <span class="keyword">namespace </span>TcpIp
<a name="l00010"></a>00010         {
<a name="l00011"></a><a class="code" href="namespace_app_sec_inc_1_1_tcp_ip_1_1_sockets.html">00011</a>                 <span class="keyword">namespace </span>Sockets
<a name="l00012"></a>00012                 {
<a name="l00019"></a><a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html">00019</a>                         <span class="keyword">class </span><a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html" title="A basic blocking socket.">Socket</a>
<a name="l00020"></a>00020                         {
<a name="l00021"></a>00021                         <span class="keyword">protected</span>:
<a name="l00022"></a><a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#ca5f42ab0ce15e41c27dae13d61a88bd">00022</a>                                 SOCKET <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#ca5f42ab0ce15e41c27dae13d61a88bd">m_socket</a>;
<a name="l00023"></a><a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#c628e7c83b8caa1730d46d86c478cdb2">00023</a>                                 <span class="keywordtype">int</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#c628e7c83b8caa1730d46d86c478cdb2">m_error</a>;
<a name="l00024"></a><a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#bf088b92c4a5728221eacde6a3612717">00024</a>                                 <span class="keywordtype">bool</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#bf088b92c4a5728221eacde6a3612717">m_connected</a>;
<a name="l00026"></a>00026                                 <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#e9d9d0624d3afea2e8caf2d21674a1a3" title="Set a socket option.">InternalSetSockOpt</a>(<span class="keywordtype">int</span> level, <span class="keywordtype">int</span> optname, <span class="keyword">const</span> <span class="keywordtype">char</span> * optval, <span class="keywordtype">int</span> optlen);
<a name="l00028"></a>00028                                 <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#0dfa29a23ab6fc2284cbf9e8580e4df0" title="Control socket IO.">InternalIoCtlSocket</a>(<span class="keywordtype">long</span> cmd, u_long * argp);
<a name="l00030"></a>00030                                 <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#86b0950d542413f96d03b86c8606cdda" title="Create a socket. See WSASocket or socket for more information.">InternalCreate</a>(<span class="keywordtype">int</span> af = AF_INET, <span class="keywordtype">int</span> type = SOCK_STREAM, <span class="keywordtype">int</span> protocol = IPPROTO_IP, LPWSAPROTOCOL_INFO lpProtocolInfo = NULL, GROUP g = NULL, DWORD dwFlags = 0);
<a name="l00032"></a>00032                                 <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#2de1a4af84b7fe3614d06ac63da2ebe1" title="Connect a socket. See WSAConnect or connect for more information.">InternalConnect</a>(<span class="keyword">const</span> <span class="keyword">struct</span> sockaddr * name, <span class="keywordtype">int</span> namelen, LPWSABUF lpCallerData = NULL, LPWSABUF lpCalleeData = NULL, LPQOS lpSQOS = NULL, LPQOS lpGQOS = NULL);
<a name="l00034"></a>00034                                 <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#3bff87a7b3f359d360cc04e8cb6df4bb" title="Shutdown a socket.">InternalShutdown</a>(<span class="keywordtype">int</span> how);
<a name="l00036"></a>00036                                 <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#1b6dbb2b46e046eeed5aa069ab640bea" title="Close a socket.">InternalClose</a>();
<a name="l00037"></a>00037                         <span class="keyword">public</span>:
<a name="l00040"></a><a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#be109d74c85724ee07b497ec5362c226">00040</a>                                 <span class="keywordtype">int</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#be109d74c85724ee07b497ec5362c226">GetError</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#c628e7c83b8caa1730d46d86c478cdb2">m_error</a>; }
<a name="l00042"></a><a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#df6f66a093fc3b0694191686c9ad6745">00042</a>                                 <span class="keywordtype">void</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#df6f66a093fc3b0694191686c9ad6745" title="Clear the error from the last failed operation on this socket.">ClearError</a>() { <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#c628e7c83b8caa1730d46d86c478cdb2">m_error</a> = 0; }
<a name="l00044"></a><a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#a2f574a16ef156cf36896929f7773978">00044</a>                                 SOCKET <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#a2f574a16ef156cf36896929f7773978">Peek</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#ca5f42ab0ce15e41c27dae13d61a88bd">m_socket</a>; }
<a name="l00046"></a><a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#7d71a4d5f0857ee3f88cd9c956737e53">00046</a>                                 <span class="keywordtype">bool</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#7d71a4d5f0857ee3f88cd9c956737e53" title="Returns true if the socket has been created.">IsCreated</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (<a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#ca5f42ab0ce15e41c27dae13d61a88bd">m_socket</a> != INVALID_SOCKET); }
<a name="l00048"></a><a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#d3d9ee61040414f6b62a23b7308d3f21">00048</a>                                 <span class="keywordtype">bool</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#d3d9ee61040414f6b62a23b7308d3f21" title="Returns true if the socket has been successfuly connected.">IsConnected</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#bf088b92c4a5728221eacde6a3612717">m_connected</a>; }
<a name="l00050"></a>00050                                 <span class="keywordtype">void</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#76e925fe0f1915e4a2b26c1dd4962de5" title="The select function determines the status of the socket, waiting if necessary, to...">Select</a>(<span class="keywordtype">bool</span> read, <span class="keywordtype">bool</span> write, <span class="keywordtype">bool</span> except, <span class="keyword">const</span> <span class="keywordtype">int</span> timeout_in_seconds, <span class="keywordtype">bool</span>&amp; timed_out);
<a name="l00052"></a>00052                                 <span class="keywordtype">void</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#7699b28d537879c6dd745ac3ef63574a" title="Turn on the linger option. Closing a socket does not wait for for the session to...">SetHardClose</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> timeout = 0);
<a name="l00054"></a>00054                                 <span class="keywordtype">void</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#3eb04bff536a9da0dd07130825688776" title="Turn off the linger option. Closing a socket does not wait for for the session to...">SetGracefulClose</a>();
<a name="l00056"></a>00056                                 <span class="keywordtype">void</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#15b69c6c6ad4181ef2bb5693d0dc0642" title="Turn on the resue address option. Allows the socket to be bound to an address that...">SetSocketReuse</a>();
<a name="l00058"></a>00058                                 <span class="keywordtype">void</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#d70518f2ad84f3bca498a427e2d74a65" title="Initialize the socket and connect to a destination. Defaults to TCP, specify SOCK_DGRAM...">Socket::Connect</a>(<span class="keyword">const</span> std::wstring&amp; ip_addr, <span class="keywordtype">unsigned</span> port, <span class="keywordtype">int</span> type = SOCK_STREAM, <span class="keywordtype">int</span> protocol = IPPROTO_IP);
<a name="l00060"></a>00060                                 <span class="keywordtype">void</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#d70518f2ad84f3bca498a427e2d74a65" title="Initialize the socket and connect to a destination. Defaults to TCP, specify SOCK_DGRAM...">Connect</a>(<span class="keyword">const</span> std::string&amp; ip_addr, <span class="keywordtype">unsigned</span> port, <span class="keywordtype">int</span> type = SOCK_STREAM, <span class="keywordtype">int</span> protocol = IPPROTO_IP);
<a name="l00062"></a>00062                                 <span class="keywordtype">void</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#d70518f2ad84f3bca498a427e2d74a65" title="Initialize the socket and connect to a destination. Defaults to TCP, specify SOCK_DGRAM...">Connect</a>(<span class="keyword">const</span> <span class="keyword">struct</span> sockaddr * name, <span class="keywordtype">int</span> namelen);
<a name="l00064"></a>00064                                 <span class="keywordtype">void</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#aa10d0fa473ad69e665b8c49ca938cfa" title="Shutdown, receive out-of-band data and close the socket (disconnect from a remote...">Disconnect</a>();
<a name="l00066"></a>00066                                 <span class="keywordtype">void</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#470142c22a6a7203d31074355303c193" title="Bind the socket to an address.">Bind</a>(<span class="keyword">const</span> std::string&amp; ip_addr, <span class="keywordtype">unsigned</span> port, <span class="keywordtype">int</span> type = SOCK_STREAM, <span class="keywordtype">int</span> protocol = IPPROTO_IP);
<a name="l00068"></a>00068                                 <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#7c3256c4fc6e2c603df73201049fae5a" title="constructor">Socket</a>();
<a name="l00069"></a>00069                                 <span class="keyword">virtual</span> <a class="code" href="class_app_sec_inc_1_1_tcp_ip_1_1_sockets_1_1_socket.html#eac4eb6379a543d38ed88977d3b6630a">~Socket</a>();
<a name="l00070"></a>00070                         };
<a name="l00071"></a>00071                 }
<a name="l00072"></a>00072         }
<a name="l00073"></a>00073 }
</pre></div></div>
  <br><hr noshade>
  <table width="100%">
   <tr>
    <td valign="top" align="left">
     <font size="1">&copy; Application Security Inc. - All Rights Reserved</font>
    </td>
    <td valign="top" align="right">
     <a href="http://msiext.codeplex.com" target="_blank">http://msiext.codeplex.com</a>
    </td>
   </tr>
  </table>
 </body>
 <head>
  <link href="tabs.css" rel="stylesheet" type="text/css">
 </head>
</html>
